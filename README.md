# Rhythm Alarm!
**コナミの大人気リズムゲーム "jubeat" のような，パネルクリック型のリズムゲームをクリアするまでミュージックが止まらないアラームです。**

## **How to Use**
    （exe ファイルを使わない方のみ）
    以下のライブラリを pip などでインストールし， Rhythm_Alarm.py を実行してください。
     - mugen
     - numpy
     - Pillow
     - pygame
     - tkinter
    -------------------------------------------------------
    ダウンロードしたフォルダ内の Rhythm_Alarm.py (Rhythm_Alarm.exe) を実行すると， Rhythm Alarm! が起動し，アラーム画面になります。
        1. 最初にパネルの遅延設定をクリックし，遅延を調整してください。
        2. 測定をクリックすると，上のパネルが動き始めるので，四角が最も大きくなった時にクリックしてください。
        3. 5回クリックすると終了し，遅延数値が反映されます。
        4. 設定 をクリックしてください。
        5. 鳴動時刻を設定し，楽曲を設定し， セット をクリックします。
        6. 時間になると，ゲームがスタートします。四角が最も大きくなった時にテンポよくクリックしてください。
        7. 目標点数(初期設定は15000点)に到達すると終了です。
        8. 詳細を確認する からスコアの詳細を確認できます。
        9. 終了 をクリックして終了します。
    
    ダウンロードしたフォルダ内の Score_maker.py (Score_maker.exe) を実行すると， Score maker for Rhythm Alarm! が起動し，使い方が表示されます。
        使い方は下の Score maker for Rhythm Alarm! を参照してください。
    
    ディレクトリ内のファイル構成を変更すると起動しなくなる可能性があります。
    移動する際は，フォルダごと移動してください。

## **製作者**
    東京都市大学 2021年度 SD-PBL(2) 第2期05班
        河西俊哉, 塩月雄也, 土岐健太郎, 眞柄圭佑, 三橋亮太

以下， "Rhythm Alarm!" と "Score maker for Rhythm Alarm!" という言葉が出てきますが，exeファイルを使用する方は Rhythm_Alarm.exe と Score_maker.exe ，Pythonファイルを使用する方は Rhythm_Alarm.py と Score_maker.py と読み替えてください。

## **楽曲の追加と削除**
    楽曲の追加には，付属の Score maker for Rhythm Alarm! をお使いください。
    このソフトウェアで実際にパネルをたたくことで，楽曲ファイルと譜面ファイルのassetsフォルダへのコピーと楽曲リストデータベースへの追加を自動で行います。
    
    楽曲の削除は以下の手順で行ってください。
        1. assetsフォルダ内の削除したい楽曲ファイル(ここではhoge.mp3とします)と譜面ファイル(ここではhoge.scoreとします)を削除してください
        2. Rhythm_Alarm.py があるフォルダ(assetsフォルダの1つ上の階層)内の music_names.txt を編集します。
        3. music_names.txt の1行目の数字を -1 してください (楽曲数を表しています)
        4. 削除したい楽曲名(ここではhogeとします)を行ごと削除し，空白行がない状態にしてください
        以上で楽曲の削除は完了です。

## **Score maker for Rhythm Alarm!**
    このソフトウェアでは， Rhythm_Alarm! へお好みの楽曲を使って自作の譜面を作り，追加することができます。
    使い方は以下の通りです。
        1. 作成したい譜面の楽曲ファイルをPCに保存しておきます。
        2. Score_maker.py を起動し(起動には時間がかかります)， Open File ボタンから楽曲ファイルを選択します。
           既に譜面がある場合，上書きするか止めるか尋ねられます。
        3. :arrow_forward: Play ボタンを押すと，1秒後に曲がスタートします。
        4. 実際に9つのパネルをクリックして譜面を作成します。
        5. 一時停止は STOP ボタンでできます。
           :arrow_forward: Play ボタン で1秒後に再開します。
        6. 同じ楽曲で複数譜面を作成したい場合は，既にある楽曲名とは別の名前でmp3ファイルを用意し，選択してください。
        7. エラーにより，ファイルのコピーやデータベースへの登録が行われないことがあります。
           その場合は 手動での楽曲ファイルの追加 を参照してください。

## **手動での楽曲ファイルの追加**
    既に譜面がある場合などは手作業で追加していただく必要があります。
    手順は以下の通りです。 (ここではmusicという名前の楽曲を追加します。)
        1. Rhythm_Alarm! があるフォルダのassetsフォルダ内に楽曲ファイル(music.mp3)と譜面ファイル(music.score)をコピーしてください。
        2. Rhythm_Alarm! があるフォルダの music_names.txt を開き編集します。
        3. music_names.txt の最後の行に追加したい楽曲名(music)を書いてください。
        4. music_names.txt の最初の行の数字を +1 してください。
        5. music_names.txt 内に空白行がないことを確認して保存してください。

## **Pyinstallerによるexeファイル化**
    Pyinstaller ライブラリを使用してexeファイル化する場合，以下の点に注意してください。
     - exeファイル化の副作用として，パネルのGIFアニメーションの表示が速くなり，パネルの表示にずれが生じます。
        => setting.txt の5行目の値を 14 (元のフレーム数，28fpsの半分) に設定することで改善します。
        => パネルの遅延調整より，delay値を調整してください。
    
     - exeファイル化によって，assetsフォルダや設定ファイルなどが失われてしまうため，復元してから起動してください。
        => assets フォルダ と music_names.txt, setting.txt , delay.txt を完成した Rhythm_Alarm.exe と同階層のディレクトリにコピーしてください。
